{
    "info": {
        "_postman_id": "d2e3f4a5-b6c7-d8e9-f0a1-b2c3d4e5f6g7",
        "name": "EMDR Professional Review System",
        "description": "Comprehensive collection for the Professional Review & Rating System:\n- Submit Review (Customer only, COMPLETED orders only)\n- Edit/Delete Review (Customer only)\n- Reply to Review (Provider only)\n- Rating Distribution Stats\n- Filter and Search Reviews",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Customer Actions",
            "item": [
                {
                    "name": "1. Submit Review",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{customerToken}}",
                                "type": "text"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"orderId\": \"{{completedOrderId}}\",\n    \"rating\": 5,\n    \"comment\": \"The food was delicious and arrived early!\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/reviews",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "reviews"
                            ]
                        },
                        "description": "Customer submits a review for a COMPLETED order. Requires customerToken."
                    },
                    "response": []
                },
                {
                    "name": "2. Update My Review",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{customerToken}}",
                                "type": "text"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"rating\": 4,\n    \"comment\": \"Updating my review: Actually, the portion size was a bit small.\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/reviews/{{reviewId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "reviews",
                                "{{reviewId}}"
                            ]
                        },
                        "description": "Customer updates their previously submitted review."
                    },
                    "response": []
                },
                {
                    "name": "3. Delete My Review",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{customerToken}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/reviews/{{reviewId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "reviews",
                                "{{reviewId}}"
                            ]
                        },
                        "description": "Customer removes their review."
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Provider Actions",
            "item": [
                {
                    "name": "1. Reply to Review",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{providerToken}}",
                                "type": "text"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"comment\": \"Thank you so much for your kind words! Reach out for a discount next time.\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/reviews/{{reviewId}}/reply",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "reviews",
                                "{{reviewId}}",
                                "reply"
                            ]
                        },
                        "description": "Provider adds a reply to a customer's review."
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Public / Analytics",
            "item": [
                {
                    "name": "1. Get Rating Stats (Distribution)",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/reviews/stats/{{providerId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "reviews",
                                "stats",
                                "{{providerId}}"
                            ]
                        },
                        "description": "Get count of 1-5 star ratings for a provider profile."
                    },
                    "response": []
                },
                {
                    "name": "2. Search & Filter Reviews",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/reviews/provider/{{providerId}}?rating=5&customerName=John&page=1&limit=10",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "reviews",
                                "provider",
                                "{{providerId}}"
                            ],
                            "query": [
                                {
                                    "key": "rating",
                                    "value": "5",
                                    "description": "Filter by 1-5 stars"
                                },
                                {
                                    "key": "customerName",
                                    "value": "John",
                                    "description": "Partial search by name"
                                },
                                {
                                    "key": "page",
                                    "value": "1"
                                },
                                {
                                    "key": "limit",
                                    "value": "10"
                                }
                            ]
                        },
                        "description": "View provider reviews with advanced search and pagination."
                    },
                    "response": []
                },
                {
                    "name": "3. Get Review By ID",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{customerToken}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/reviews/{{reviewId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "reviews",
                                "{{reviewId}}"
                            ]
                        },
                        "description": "Fetch full details of a specific review."
                    },
                    "response": []
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "baseUrl",
            "value": "http://localhost:5000/api/v1",
            "type": "string"
        },
        {
            "key": "customerToken",
            "value": "PASTE_CUSTOMER_JWT_HERE",
            "type": "string"
        },
        {
            "key": "providerToken",
            "value": "PASTE_PROVIDER_JWT_HERE",
            "type": "string"
        },
        {
            "key": "completedOrderId",
            "value": "ORD-...",
            "type": "string"
        },
        {
            "key": "reviewId",
            "value": "MONGODB_ID_OF_REVIEW",
            "type": "string"
        },
        {
            "key": "providerId",
            "value": "MONGODB_ID_OF_PROVIDER",
            "type": "string"
        }
    ]
}